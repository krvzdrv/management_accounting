# Как получить код авторизации

## Пошаговая инструкция

### 1. Откройте URL в браузере

Скопируйте этот URL и откройте в браузере:

```
https://accounts.google.com/o/oauth2/v2/auth?access_type=offline&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fscript.projects%20https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive.file&response_type=code&client_id=929817317904-f9t4f9sp2h8pf08jp7svev9gij61tjq5.apps.googleusercontent.com&redirect_uri=http%3A%2F%2Flocalhost%3A3000%2Foauth2callback
```

Или скопируйте URL из терминала (после "Visit this URL to authorize:").

### 2. Авторизуйтесь в Google

1. Откроется страница Google с запросом на авторизацию
2. Выберите аккаунт: **volosevich.flexy@gmail.com**
3. Может появиться предупреждение "Google hasn't verified this app"
   - Нажмите **"Advanced"** (Дополнительно)
   - Нажмите **"Go to Management Accounting Updater (unsafe)"**
4. Нажмите **"Allow"** (Разрешить)

### 3. Получите код из URL

**После авторизации браузер попытается перенаправить на `localhost:3000`**

**Вариант A: Код в адресной строке (самый простой)**

После нажатия "Allow":
- Браузер может показать ошибку "This site can't be reached" или "localhost refused to connect"
- **Это нормально!** Код авторизации находится в URL адресной строки
- Посмотрите на адресную строку браузера
- Должно быть что-то вроде:
  ```
  http://localhost:3000/oauth2callback?code=4/0AeanS...длинная_строка...&scope=...
  ```
- Скопируйте **всю строку** после `code=` и до `&` (или до конца URL)

**Вариант B: Код на странице**

Если на странице показан код авторизации:
- Скопируйте его полностью

**Вариант C: Если не видите код**

Если браузер не показывает URL с кодом:

1. Откройте **Инструменты разработчика** (F12 или Cmd+Option+I на Mac)
2. Перейдите на вкладку **Network** (Сеть)
3. Обновите страницу или попробуйте авторизоваться снова
4. Найдите запрос к `localhost:3000/oauth2callback`
5. Посмотрите URL запроса - там будет параметр `code=...`

### 4. Вставьте код в терминал

1. Вернитесь в терминал
2. Вставьте скопированный код (Ctrl+V или Cmd+V)
3. Нажмите **Enter**

---

## Пример кода авторизации

Код выглядит примерно так:
```
4/0AeanS1AbCdEfGhIjKlMnOpQrStUvWxYz1234567890-abcdefghijklmnopqrstuvwxyz
```

Это длинная строка из букв, цифр и символов.

---

## Если возникли проблемы

### Проблема: "This site can't be reached" после авторизации

**Решение:** Это нормально! Код находится в URL адресной строки. Скопируйте его оттуда.

### Проблема: Не вижу код в URL

**Решение:**
1. Проверьте адресную строку браузера полностью
2. Код находится после `code=` в URL
3. Может быть закодирован - скопируйте всю строку после `code=`

### Проблема: URL слишком длинный

**Решение:** Скопируйте всю строку после `code=` до первого `&` или до конца URL.

---

## Важно

- ✅ Код авторизации одноразовый (используется один раз)
- ✅ Код действителен несколько минут
- ✅ Не делитесь кодом ни с кем
- ✅ После использования код больше не нужен (токен сохраняется в token.json)

---

## После ввода кода

После ввода кода в терминал:
1. Скрипт сохранит токен в `token.json`
2. Начнет обновлять файлы в Apps Script
3. Покажет прогресс для каждого файла

**Напишите мне результат!**

