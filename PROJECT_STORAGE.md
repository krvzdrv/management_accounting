# Где хранить проект: Google Drive vs GitHub

## Рекомендуемый подход: GitHub + Google Apps Script

### ✅ Лучший вариант: GitHub как основной репозиторий

**Преимущества:**
- ✅ Версионирование кода (Git)
- ✅ История изменений
- ✅ Я могу редактировать файлы напрямую
- ✅ Легко отслеживать изменения
- ✅ Можно работать в команде
- ✅ Резервные копии автоматически

**Как это работает:**
1. **GitHub** - основной репозиторий (где я работаю)
2. **Google Apps Script** - рабочая среда (где выполняется код)
3. При обновлении - копируете код из GitHub в Apps Script

## Варианты организации

### Вариант 1: GitHub + Ручное копирование (простой)

**Структура:**
```
GitHub (репозиторий)
  ├── Config.gs
  ├── Main.gs
  └── ... (все файлы)

Google Apps Script (рабочая среда)
  ├── Config (копия из GitHub)
  ├── Main (копия из GitHub)
  └── ... (копии всех файлов)
```

**Процесс обновления:**
1. Я вношу изменения в GitHub
2. Вы копируете обновленные файлы в Apps Script
3. Или используете функцию `updateSystem()` для автоматического обновления

**Плюсы:**
- ✅ Простота
- ✅ Полный контроль
- ✅ Легко откатить изменения

**Минусы:**
- ⚠️ Нужно вручную копировать при обновлении

---

### Вариант 2: GitHub + Google Drive (автоматизация)

**Структура:**
```
GitHub (репозиторий)
  └── Все исходники

Google Drive
  └── Папка "Management Accounting Scripts"
      └── Файлы .gs (синхронизируются с GitHub)

Google Apps Script
  └── Подключен к папке на Drive
```

**Как настроить:**

1. **Создать папку на Google Drive:**
   - Создайте папку "Management Accounting Scripts"
   - Скопируйте туда все файлы .gs

2. **Подключить Apps Script к Drive:**
   - В Apps Script: Файл → Управление версиями
   - Или используйте библиотеки Apps Script

**Плюсы:**
- ✅ Автоматическая синхронизация
- ✅ Версионирование через GitHub
- ✅ Резервные копии на Drive

**Минусы:**
- ⚠️ Сложнее настроить
- ⚠️ Нужны дополнительные шаги

---

### Вариант 3: GitHub + Apps Script Library (продвинутый)

**Структура:**
```
GitHub (репозиторий)
  └── Все исходники

Google Apps Script Project 1 (библиотека)
  └── Общие модули (Config, Utils)

Google Apps Script Project 2 (основной проект)
  └── Подключает библиотеку из Project 1
  └── Специфичные модули (Main, etc)
```

**Как настроить:**

1. **Создать библиотеку Apps Script:**
   - Новый проект Apps Script
   - Добавить общие модули (Config, Utils)
   - Опубликовать как библиотеку
   - Получить Script ID

2. **Подключить библиотеку:**
   - В основном проекте: Ресурсы → Библиотеки
   - Добавить Script ID библиотеки
   - Использовать функции из библиотеки

**Плюсы:**
- ✅ Переиспользование кода
- ✅ Централизованное обновление
- ✅ Версионирование библиотек

**Минусы:**
- ⚠️ Сложная настройка
- ⚠️ Ограничения на использование

---

## Рекомендация: Вариант 1 + Автоматизация через updateSystem()

### Текущая структура (уже работает):

```
GitHub (репозиторий) ← Я работаю здесь
  ├── Config.gs
  ├── Main.gs
  ├── UpdateManager.gs
  └── ... (все файлы)

Google Apps Script ← Вы работаете здесь
  ├── Config (копия)
  ├── Main (копия)
  └── ... (копии)
```

### Улучшение: Автоматическое обновление из GitHub

Можно добавить функцию, которая автоматически загружает обновления из GitHub:

```javascript
/**
 * Обновить скрипты из GitHub
 */
function updateScriptsFromGitHub() {
  const GITHUB_RAW_URL = 'https://raw.githubusercontent.com/your-username/management-accounting/main/';
  const files = [
    'Config.gs',
    'Main.gs',
    'UpdateManager.gs',
    // ... список всех файлов
  ];
  
  files.forEach(fileName => {
    try {
      const url = GITHUB_RAW_URL + fileName;
      const response = UrlFetchApp.fetch(url);
      const content = response.getContentText();
      
      // Обновить файл в Apps Script
      updateScriptFile(fileName.replace('.gs', ''), content);
      
      logInfo(`Updated: ${fileName}`);
    } catch (error) {
      logError(`Failed to update ${fileName}`, error);
    }
  });
}
```

**Но это сложно**, потому что:
- ⚠️ Нужен доступ к GitHub API
- ⚠️ Нужно управлять файлами Apps Script через API
- ⚠️ Может быть небезопасно

---

## Практическое решение

### Текущий подход (рекомендуется):

1. **GitHub** - основной репозиторий
   - Я вношу изменения здесь
   - Версионирование через Git
   - История изменений

2. **Google Apps Script** - рабочая среда
   - Вы копируете код из GitHub
   - Или используете функцию `updateSystem()` для обновления структуры

3. **Процесс обновления:**
   ```
   Я вношу изменения в GitHub
        ↓
   Вы получаете уведомление или проверяете изменения
        ↓
   Копируете обновленные файлы в Apps Script
        ↓
   Запускаете updateSystem() для обновления структуры таблиц
   ```

### Упрощенный процесс:

**Для вас:**
- Работаете в Google Apps Script
- При необходимости обновления - копируете из GitHub
- Используете `updateSystem()` для обновления структуры

**Для меня:**
- Работаю в GitHub
- Вношу изменения в файлы
- Вы получаете обновления через GitHub

---

## Альтернатива: Google Drive как промежуточное хранилище

Если хотите автоматизацию:

1. **GitHub** → исходники
2. **Google Drive** → папка с файлами .gs
3. **Apps Script** → импорт из Drive

Но это требует дополнительной настройки и не дает особых преимуществ.

---

## Итоговая рекомендация

### ✅ Используйте GitHub как основной репозиторий

**Почему:**
- ✅ Я могу работать напрямую с файлами
- ✅ Версионирование и история изменений
- ✅ Легко отслеживать что изменилось
- ✅ Резервные копии автоматически
- ✅ Можно работать в команде

**Процесс работы:**
1. Я вношу изменения в GitHub
2. Вы видите изменения в репозитории
3. При обновлении копируете нужные файлы в Apps Script
4. Используете `updateSystem()` для обновления структуры таблиц

**Это самый простой и надежный подход!**

---

## Настройка GitHub репозитория

Если еще не настроен:

1. Создайте репозиторий на GitHub
2. Скопируйте все файлы .gs туда
3. Настройте .gitignore (если нужно)
4. Готово!

Я смогу работать с файлами напрямую, а вы будете видеть все изменения в репозитории.

